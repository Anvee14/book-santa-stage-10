{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\anvee\\\\my_git_projects\\\\book-santa-stage-10\\\\screens\\\\RecieverDetailsScreen.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { Card, Header, Icon } from 'react-native-elements';\nimport firebase from 'firebase';\nimport db from \"../config.js\";\n\nvar RecieverDetailsScreen = function (_Component) {\n  _inherits(RecieverDetailsScreen, _Component);\n\n  var _super = _createSuper(RecieverDetailsScreen);\n\n  function RecieverDetailsScreen(props) {\n    var _this;\n\n    _classCallCheck(this, RecieverDetailsScreen);\n\n    _this = _super.call(this, props);\n\n    _this.getUserDetails = function (userId) {\n      db.collection(\"users\").where('email_id', '==', userId).get().then(function (snapshot) {\n        snapshot.forEach(function (doc) {\n          _this.setState({\n            userName: doc.data().first_name + \" \" + doc.data().last_name\n          });\n        });\n      });\n    };\n\n    _this.updateBookStatus = function () {\n      db.collection('all_donations').add({\n        \"book_name\": _this.state.bookName,\n        \"request_id\": _this.state.requestId,\n        \"requested_by\": _this.state.recieverName,\n        \"donor_id\": _this.state.userId,\n        \"request_status\": \"Donor Interested\"\n      });\n    };\n\n    _this.addNotification = function () {\n      var message = _this.state.userName + \" has shown interest in donating the book\";\n      db.collection(\"all_notifications\").add({\n        \"targeted_user_id\": _this.state.recieverId,\n        \"donor_id\": _this.state.userId,\n        \"request_id\": _this.state.requestId,\n        \"book_name\": _this.state.bookName,\n        \"date\": firebase.firestore.FieldValue.serverTimestamp(),\n        \"notification_status\": \"unread\",\n        \"message\": message\n      });\n    };\n\n    _this.state = {\n      userId: firebase.auth().currentUser.email,\n      userName: \"\",\n      recieverId: _this.props.navigation.getParam('details')[\"user_id\"],\n      requestId: _this.props.navigation.getParam('details')[\"request_id\"],\n      bookName: _this.props.navigation.getParam('details')[\"book_name\"],\n      reason_for_requesting: _this.props.navigation.getParam('details')[\"reason_to_request\"],\n      recieverName: '',\n      recieverContact: '',\n      recieverAddress: '',\n      recieverRequestDocId: '',\n      bookImage: \"#\"\n    };\n    return _this;\n  }\n\n  _createClass(RecieverDetailsScreen, [{\n    key: \"getRecieverDetails\",\n    value: function getRecieverDetails() {\n      var _this2 = this;\n\n      db.collection('users').where('email_id', '==', this.state.recieverId).get().then(function (snapshot) {\n        snapshot.forEach(function (doc) {\n          _this2.setState({\n            recieverName: doc.data().first_name,\n            recieverContact: doc.data().contact,\n            recieverAddress: doc.data().address\n          });\n        });\n      });\n      db.collection('requested_books').where('request_id', '==', this.state.requestId).get().then(function (snapshot) {\n        snapshot.forEach(function (doc) {\n          _this2.setState({\n            recieverRequestDocId: doc.id,\n            bookImage: doc.data().image_link\n          });\n        });\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getRecieverDetails();\n      this.getUserDetails(this.state.userId);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(View, {\n        style: styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 0.1\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 9\n        }\n      }, React.createElement(Header, {\n        leftComponent: React.createElement(Icon, {\n          name: \"arrow-left\",\n          type: \"feather\",\n          color: \"#696969\",\n          onPress: function onPress() {\n            return _this3.props.navigation.goBack();\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 28\n          }\n        }),\n        centerComponent: {\n          text: \"Donate Books\",\n          style: {\n            color: '#90A5A9',\n            fontSize: 20,\n            fontWeight: \"bold\"\n          }\n        },\n        backgroundColor: \"#eaf8fe\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }\n      })), React.createElement(View, {\n        style: {\n          flex: 0.4\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 9\n        }\n      }, React.createElement(Image, {\n        source: {\n          uri: this.state.bookImage\n        },\n        style: {\n          width: \"100%\",\n          height: \"100%\",\n          resizeMode: \"contain\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }\n      })), React.createElement(View, {\n        style: {\n          flex: 0.3\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 9\n        }\n      }, React.createElement(Card, {\n        title: \"Book Information\",\n        titleStyle: {\n          fontSize: 20\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }\n      }, React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontWeight: 'bold'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 15\n        }\n      }, \"Name : \", this.state.bookName)), React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontWeight: 'bold'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 15\n        }\n      }, \"Reason : \", this.state.reason_for_requesting)))), React.createElement(View, {\n        style: {\n          flex: 0.3\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 9\n        }\n      }, React.createElement(Card, {\n        title: \"Reciever Information\",\n        titleStyle: {\n          fontSize: 20\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }\n      }, React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontWeight: 'bold'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 15\n        }\n      }, \"Name: \", this.state.recieverName)), React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontWeight: 'bold'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 15\n        }\n      }, \"Contact: \", this.state.recieverContact)), React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontWeight: 'bold'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 15\n        }\n      }, \"Address: \", this.state.recieverAddress)))), React.createElement(View, {\n        style: styles.buttonContainer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 9\n        }\n      }, this.state.recieverId !== this.state.userId ? React.createElement(TouchableOpacity, {\n        style: styles.button,\n        onPress: function onPress() {\n          _this3.updateBookStatus();\n\n          _this3.addNotification();\n\n          _this3.props.navigation.navigate('MyDonations');\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 19\n        }\n      }, \"I want to Donate\")) : null));\n    }\n  }]);\n\n  return RecieverDetailsScreen;\n}(Component);\n\nexport { RecieverDetailsScreen as default };\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  buttonContainer: {\n    flex: 0.3,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  button: {\n    width: 200,\n    height: 50,\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 10,\n    backgroundColor: 'orange',\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 8\n    },\n    elevation: 16\n  }\n});","map":{"version":3,"sources":["C:/Users/anvee/my_git_projects/book-santa-stage-10/screens/RecieverDetailsScreen.js"],"names":["React","Component","Card","Header","Icon","firebase","db","RecieverDetailsScreen","props","getUserDetails","userId","collection","where","get","then","snapshot","forEach","doc","setState","userName","data","first_name","last_name","updateBookStatus","add","state","bookName","requestId","recieverName","addNotification","message","recieverId","firestore","FieldValue","serverTimestamp","auth","currentUser","email","navigation","getParam","reason_for_requesting","recieverContact","recieverAddress","recieverRequestDocId","bookImage","contact","address","id","image_link","getRecieverDetails","styles","container","flex","goBack","text","style","color","fontSize","fontWeight","uri","width","height","resizeMode","buttonContainer","button","navigate","StyleSheet","create","justifyContent","alignItems","borderRadius","backgroundColor","shadowColor","shadowOffset","elevation"],"mappings":"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","sourcesContent":["\r\nimport React, { Component } from 'react';\r\nimport { View, Text, StyleSheet, TouchableOpacity } from 'react-native';\r\nimport { Card, Header, Icon } from 'react-native-elements';\r\nimport firebase from 'firebase';\r\n\r\nimport db from '../config.js';\r\n\r\nexport default class RecieverDetailsScreen extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      userId: firebase.auth().currentUser.email,\r\n      userName: \"\",\r\n      recieverId: this.props.navigation.getParam('details')[\"user_id\"],\r\n      requestId: this.props.navigation.getParam('details')[\"request_id\"],\r\n      bookName: this.props.navigation.getParam('details')[\"book_name\"],\r\n      reason_for_requesting: this.props.navigation.getParam('details')[\"reason_to_request\"],\r\n      recieverName: '',\r\n      recieverContact: '',\r\n      recieverAddress: '',\r\n      recieverRequestDocId: '',\r\n      bookImage: \"#\"\r\n    }\r\n  }\r\n\r\n\r\n\r\n  getRecieverDetails() {\r\n    db.collection('users').where('email_id', '==', this.state.recieverId).get()\r\n      .then(snapshot => {\r\n        snapshot.forEach(doc => {\r\n          this.setState({\r\n            recieverName: doc.data().first_name,\r\n            recieverContact: doc.data().contact,\r\n            recieverAddress: doc.data().address,\r\n          })\r\n        })\r\n      });\r\n\r\n    db.collection('requested_books').where('request_id', '==', this.state.requestId).get()\r\n      .then(snapshot => {\r\n        snapshot.forEach(doc => {\r\n          this.setState({\r\n            recieverRequestDocId: doc.id,\r\n            bookImage: doc.data().image_link\r\n          })\r\n        })\r\n      })\r\n  }\r\n\r\n\r\n  getUserDetails = (userId) => {\r\n    db.collection(\"users\").where('email_id', '==', userId).get()\r\n      .then((snapshot) => {\r\n        snapshot.forEach((doc) => {\r\n          this.setState({\r\n            userName: doc.data().first_name + \" \" + doc.data().last_name\r\n          })\r\n        })\r\n      })\r\n  }\r\n\r\n  updateBookStatus = () => {\r\n    db.collection('all_donations').add({\r\n      \"book_name\": this.state.bookName,\r\n      \"request_id\": this.state.requestId,\r\n      \"requested_by\": this.state.recieverName,\r\n      \"donor_id\": this.state.userId,\r\n      \"request_status\": \"Donor Interested\"\r\n    })\r\n  }\r\n\r\n\r\n  addNotification = () => {\r\n    var message = this.state.userName + \" has shown interest in donating the book\"\r\n    db.collection(\"all_notifications\").add({\r\n      \"targeted_user_id\": this.state.recieverId,\r\n      \"donor_id\": this.state.userId,\r\n      \"request_id\": this.state.requestId,\r\n      \"book_name\": this.state.bookName,\r\n      \"date\": firebase.firestore.FieldValue.serverTimestamp(),\r\n      \"notification_status\": \"unread\",\r\n      \"message\": message\r\n    })\r\n  }\r\n\r\n\r\n\r\n  componentDidMount() {\r\n    this.getRecieverDetails()\r\n    this.getUserDetails(this.state.userId)\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <View style={styles.container}>\r\n        <View style={{ flex: 0.1 }}>\r\n          <Header\r\n            leftComponent={<Icon name='arrow-left' type='feather' color='#696969' onPress={() => this.props.navigation.goBack()} />}\r\n            centerComponent={{ text: \"Donate Books\", style: { color: '#90A5A9', fontSize: 20, fontWeight: \"bold\", } }}\r\n            backgroundColor=\"#eaf8fe\"\r\n          />\r\n        </View>\r\n        <View style={{ flex: 0.4 }}>\r\n\r\n          <Image\r\n            source={{ uri: this.state.bookImage }}\r\n            style={{ width: \"100%\", height: \"100%\", resizeMode: \"contain\", }}\r\n          />\r\n        </View>\r\n        <View style={{ flex: 0.3 }}>\r\n          <Card\r\n            title={\"Book Information\"}\r\n            titleStyle={{ fontSize: 20 }}\r\n          >\r\n            <Card >\r\n              <Text style={{ fontWeight: 'bold' }}>Name : {this.state.bookName}</Text>\r\n            </Card>\r\n            <Card>\r\n              <Text style={{ fontWeight: 'bold' }}>Reason : {this.state.reason_for_requesting}</Text>\r\n            </Card>\r\n          </Card>\r\n        </View>\r\n        <View style={{ flex: 0.3 }}>\r\n          <Card\r\n            title={\"Reciever Information\"}\r\n            titleStyle={{ fontSize: 20 }}\r\n          >\r\n            <Card>\r\n              <Text style={{ fontWeight: 'bold' }}>Name: {this.state.recieverName}</Text>\r\n            </Card>\r\n            <Card>\r\n              <Text style={{ fontWeight: 'bold' }}>Contact: {this.state.recieverContact}</Text>\r\n            </Card>\r\n            <Card>\r\n              <Text style={{ fontWeight: 'bold' }}>Address: {this.state.recieverAddress}</Text>\r\n            </Card>\r\n          </Card>\r\n        </View>\r\n        <View style={styles.buttonContainer}>\r\n          {\r\n            this.state.recieverId !== this.state.userId\r\n              ? (\r\n                <TouchableOpacity\r\n                  style={styles.button}\r\n                  onPress={() => {\r\n                    this.updateBookStatus()\r\n                    this.addNotification()\r\n                    this.props.navigation.navigate('MyDonations')\r\n                  }}>\r\n                  <Text>I want to Donate</Text>\r\n                </TouchableOpacity>\r\n              )\r\n              : null\r\n          }\r\n        </View>\r\n      </View>\r\n    )\r\n  }\r\n\r\n}\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n  },\r\n  buttonContainer: {\r\n    flex: 0.3,\r\n    justifyContent: 'center',\r\n    alignItems: 'center'\r\n  },\r\n  button: {\r\n    width: 200,\r\n    height: 50,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    borderRadius: 10,\r\n    backgroundColor: 'orange',\r\n    shadowColor: \"#000\",\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 8\r\n    },\r\n    elevation: 16\r\n  }\r\n})\r\n"]},"metadata":{},"sourceType":"module"}